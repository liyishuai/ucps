\input{ucps}
\usepackage{graphicx}
\usepackage{mdframed}
\usepackage{stmaryrd}

\newcommand\fun\lambda
\newcommand{\K}[1]{\llbracket #1\rrbracket}
\newcommand{\kdef}[2]{&\K{#1}~K&=\quad&#2}

\title{Continuation-Passing Style}
\date{}

\begin{document}
\maketitle

\section*{Syntax}
\begin{figure}[h]
\begin{mdframed}
\ottmetavars

\ottgrammar
\end{mdframed}
\end{figure}

\section*{Transformation}
\subsection*{Call-by-value}
\begin{align*}
\kdef{x}{K~x}\\
\kdef{\fun x.~e}{K~(\fun x~k.~\K{e}~k)}\\
\kdef{t_0~t_1}{\K{t_0}~\K{t_1}~K}\\
\kdef{t_0~s_1}{\K{s_1}~(\fun x_1.~\K{t_0}~x_1~K)}\\
\kdef{s_0~t_1}{\K{s_0}~(\fun x_0.~x_0~\K{t_1}~K)}\\
\kdef{s_0~s_1}{\K{s_0}~(\fun x_0.~\K{s_1}~(\fun x_1.~x_0~x_1~K))}
\end{align*}

\subsection*{Call-by-name}
\begin{align*}
\kdef{x}{K~x}\\
\kdef{\fun x.~e}{K~(\fun x~k.~\K{e}~k)}\\
\kdef{t_0~e_1}{\K{t_0}~\K{e_1}~K}\\
\kdef{s_0~e_1}{\K{s_0}~(\fun x_0.~x_0~\K{e_1}~K)}
\end{align*}
\end{document}
